{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://1er-degre.fr/schemas/workshop.json",
  "title": "Workshop",
  "description": "Workshop or training session entity with scheduling, organization, and classification",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique workshop identifier",
      "readOnly": true
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Workshop title"
    },
    "description": {
      "type": "string",
      "description": "Detailed workshop description"
    },
    "workshop": {
      "type": "string",
      "enum": ["FDFP", "HD"],
      "description": "Workshop family: FDFP (Formation du Faire ensemble) or HD (Heure Déclic) - 1er Degré types"
    },
    "type": {
      "type": "string",
      "enum": [
        "formation",
        "formation_pro_1",
        "formation_pro_2",
        "formation_formateur",
        "formation_retex"
      ],
      "description": "Type of training session"
    },
    "organizer": {
      "type": "string",
      "format": "uuid",
      "description": "Primary organizer user ID"
    },
    "co_organizers": {
      "type": "array",
      "description": "Additional organizers/facilitators",
      "items": {
        "type": "string",
        "format": "uuid"
      },
      "default": []
    },
    "lifecycle_status": {
      "type": "string",
      "enum": ["active", "closed", "canceled"],
      "description": "Workshop lifecycle status"
    },
    "classification_status": {
      "type": "string",
      "enum": [
        "benevole_grand_public",
        "interne_asso",
        "interne_entreprise",
        "interne_profs",
        "interne_etudiants_alumnis",
        "interne_elus",
        "interne_agents",
        "externe_asso",
        "externe_entreprise",
        "externe_profs",
        "externe_etudiants_alumnis",
        "externe_elus",
        "externe_agents"
      ],
      "description": "Workshop classification taxonomy for audience segmentation"
    },
    "audience_number": {
      "type": "integer",
      "minimum": 0,
      "description": "Expected or maximum number of participants"
    },
    "invoice_number": {
      "type": ["string", "null"],
      "description": "Invoice reference number if applicable"
    },
    "is_remote": {
      "type": "boolean",
      "description": "Whether workshop is conducted remotely",
      "default": false
    },
    "visio_link": {
      "type": ["string", "null"],
      "format": "uri",
      "description": "Video conference link for remote sessions"
    },
    "mural_link": {
      "type": ["string", "null"],
      "format": "uri",
      "description": "Mural or collaborative board link"
    },
    "location": {
      "type": ["object", "null"],
      "description": "Physical location details for in-person workshops",
      "properties": {
        "venue_name": {
          "type": "string",
          "description": "Name of the venue"
        },
        "street": {
          "type": "string"
        },
        "street2": {
          "type": ["string", "null"]
        },
        "city": {
          "type": "string"
        },
        "postal_code": {
          "type": "string"
        },
        "region": {
          "type": ["string", "null"]
        },
        "country": {
          "type": "string",
          "pattern": "^[A-Z]{2}$",
          "default": "FR"
        }
      },
      "required": ["venue_name", "street", "city", "postal_code", "country"]
    },
    "start_at": {
      "type": "string",
      "format": "date-time",
      "description": "Workshop start date and time"
    },
    "end_at": {
      "type": "string",
      "format": "date-time",
      "description": "Workshop end date and time"
    },
    "mail_pre_html": {
      "type": ["string", "null"],
      "description": "Pre-workshop email HTML content"
    },
    "mail_post_html": {
      "type": ["string", "null"],
      "description": "Post-workshop email HTML content"
    },
    "modified_date_flag": {
      "type": "boolean",
      "description": "Flag indicating workshop date was modified after initial publication",
      "default": false
    },
    "modified_location_flag": {
      "type": "boolean",
      "description": "Flag indicating workshop location was modified after initial publication",
      "default": false
    },
    "tenant_id": {
      "type": "string",
      "description": "Tenant identifier for multi-tenant isolation",
      "default": "1er-Degré"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Workshop creation timestamp",
      "readOnly": true
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp",
      "readOnly": true
    }
  },
  "required": [
    "title",
    "workshop",
    "type",
    "organizer",
    "lifecycle_status",
    "classification_status",
    "is_remote",
    "start_at",
    "end_at"
  ]
}
